-- Adminer 4.8.1 MySQL 5.7.42 dump

SET NAMES utf8;
SET time_zone = '+00:00';
SET foreign_key_checks = 0;
SET sql_mode = 'NO_AUTO_VALUE_ON_ZERO';

USE `ev_charging_db`;

CREATE TABLE `charging_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ev_id` varchar(100) NOT NULL,
  `time` time NOT NULL,
  `energy` varchar(20) NOT NULL,
  `savedate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


CREATE TABLE `charging_status` (
  `id_status` int(11) NOT NULL AUTO_INCREMENT,
  `ev_id` varchar(100) NOT NULL,
  `status` varchar(50) NOT NULL,
  `voltase` float NOT NULL,
  `arus` float NOT NULL,
  `inpower` float NOT NULL,
  `inenergy` float NOT NULL,
  `infrequency` float NOT NULL,
  `inpf` float NOT NULL,
  `insert_status` enum('0','1') NOT NULL,
  `status_code` enum('0','1') NOT NULL,
  `detect_vehicle` enum('0','1') NOT NULL,
  `payment_status` enum('UNPAID','PAID') NOT NULL,
  PRIMARY KEY (`id_status`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `charging_status` (`id_status`, `ev_id`, `status`, `voltase`, `arus`, `inpower`, `inenergy`, `infrequency`, `inpf`, `insert_status`, `status_code`, `detect_vehicle`, `payment_status`) VALUES
(1,	'EV01',	'OFF',	0,	0,	0,	0,	0,	0,	'0',	'0',	'0',	'UNPAID'),
(2,	'EV02',	'OFF',	0,	0,	0,	0,	0,	0,	'0',	'0',	'1',	'UNPAID'),
(3,	'EV03',	'OFF',	10,	2,	1200,	0,	0,	0,	'0',	'0',	'1',	'UNPAID'),
(4,	'BE01',	'OFF',	1,	0,	0,	0,	0,	0,	'0',	'0',	'1',	'UNPAID'),
(5,	'BE02',	'OFF',	0,	20,	1200,	0,	0,	0,	'0',	'0',	'0',	'UNPAID'),
(6,	'BE10',	'OFF',	0,	20,	1200,	0,	0,	0,	'0',	'0',	'1',	'UNPAID');

SET NAMES utf8mb4;

DROP TABLE IF EXISTS `evgate`;
CREATE TABLE `evgate` (
  `evgate_id` int(11) NOT NULL AUTO_INCREMENT,
  `customer_id` varchar(50) DEFAULT NULL,
  `qr_code` varchar(50) DEFAULT NULL,
  `ip_address` varchar(50) DEFAULT NULL,
  `serial_number` varchar(50) DEFAULT NULL,
  `video_iklan` varchar(50) DEFAULT NULL,
  `charger_status` varchar(50) DEFAULT NULL,
  `voltage` varchar(50) DEFAULT NULL,
  `current` varchar(50) DEFAULT NULL,
  `power` varchar(50) DEFAULT NULL,
  `energy` varchar(50) DEFAULT NULL,
  `insert_status` varchar(50) DEFAULT NULL,
  `status_code` varchar(50) DEFAULT NULL,
  `parkee_service` varchar(50) DEFAULT NULL,
  `time` time DEFAULT NULL,
  `updated_log` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`evgate_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

INSERT INTO `evgate` (`evgate_id`, `customer_id`, `qr_code`, `ip_address`, `serial_number`, `video_iklan`, `charger_status`, `voltage`, `current`, `power`, `energy`, `insert_status`, `status_code`, `parkee_service`, `time`, `updated_log`) VALUES
(1,	'EV01',	'non',	'110.0.50.55',	'SM413e46eb377918',	'TutorialBluechargeV3',	'Available',	'227.2',	'0.05',	'0',	'0.0 kWh',	'1',	NULL,	'OFF',	'00:00:00',	'2024-11-06 04:21:48'),
(2,	'EV02',	'ev02',	'111.0.51.21',	NULL,	'TutorialBluechargeV3',	'Unavailable',	'0',	'0',	'0',	'0.0 kWh',	'1',	NULL,	'OFF',	'00:00:00',	'2024-08-14 06:38:01');


INSERT INTO `evgate` (`evgate_id`, `customer_id`, `qr_code`, `ip_address`, `serial_number`, `video_iklan`, `charger_status`, `voltage`, `current`, `power`, `energy`, `insert_status`, `status_code`, `parkee_service`, `time`, `updated_log`) VALUES
(1,	'EV01',	'ev01',	'111.0.51.21',	NULL,	'TutorialBluechargeV3',	'Unavailable',	'0',	'0',	'0',	'0.0 kWh',	'1',	NULL,	NULL,	'00:00:00',	'2024-11-05 09:53:38'),
(2,	'EV02',	'ev02',	'111.0.51.21',	NULL,	'TutorialBluechargeV3',	'Unavailable',	'0',	'0',	'0',	'0.0 kWh',	'1',	NULL,	NULL,	'00:00:00',	'2024-08-14 06:38:01');

CREATE TABLE `mst_smart_card` (
  `smart_card_id` int(11) NOT NULL AUTO_INCREMENT,
  `smart_card_hex` varchar(20) NOT NULL,
  `smart_card_duration_hour` double NOT NULL,
  `smart_card_name` varchar(50) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`smart_card_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `mst_smart_card` (`smart_card_id`, `smart_card_hex`, `smart_card_duration_hour`, `smart_card_name`, `created_at`, `updated_at`) VALUES
(28,	'D1B4A241',	0.0166667,	'GI Valet eVIP 2 Jam',	'2024-07-15 12:06:05',	'2024-07-15 12:06:05'),
(29,	'E17E9B41',	0.5,	'GI Valet eVIP 1 Jam',	'2024-07-15 12:44:16',	'2024-07-15 12:44:16'),
(30,	'CD777626',	30,	'Test Smart Card Duration',	'2024-09-23 08:09:09',	'2024-09-23 08:09:09'),
(31,	'267677CD',	2,	'Test Convert Little Endian',	'2024-09-23 08:42:22',	'2024-09-23 08:42:22');

CREATE TABLE `reader_configuration` (
  `reader_id` int(11) NOT NULL AUTO_INCREMENT,
  `reader_port` varchar(50) NOT NULL,
  `reader_type` varchar(50) NOT NULL,
  `reader_name` varchar(100) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`reader_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `reader_configuration` (`reader_id`, `reader_port`, `reader_type`, `reader_name`, `created_at`, `updated_at`) VALUES
(1,	'COM11',	'SERIAL',	'duali',	'2024-10-02 09:13:10',	'2024-10-02 09:13:10'),
(12,	'0',	'USB',	'ACS ACR1252 1S CL Reader PICC 0',	'2024-07-14 17:31:50',	'2024-07-14 17:31:50'),
(13,	'0',	'USB',	'ACS ACR1252 Dual Reader [ACR1252 Dual Reader PICC] 00 00',	'2024-07-15 10:27:32',	'2024-07-15 10:27:32');

CREATE TABLE `settlement_transaction` (
  `settlement_id` int(11) NOT NULL AUTO_INCREMENT,
  `settlement_card_type` varchar(2) NOT NULL,
  `settlement_mid` varchar(16) NOT NULL,
  `settlement_tid` varchar(8) NOT NULL,
  `settlement_date` varchar(10) NOT NULL,
  `settlement_trans_date` varchar(14) NOT NULL,
  `settlement_card_number` varchar(16) NOT NULL,
  `settlement_deduct` int(11) NOT NULL,
  `settlement_deduct_amount_hex` varchar(8) NOT NULL,
  `settlement_balance_hex` varchar(8) NOT NULL,
  `settlement_trans_counter` varchar(8) NOT NULL,
  `settlement_trans_log` varchar(500) NOT NULL,
  `settlement_status` enum('SETTLED','UNSETTLED') NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`settlement_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `settlement_transaction` (`settlement_id`, `settlement_card_type`, `settlement_mid`, `settlement_tid`, `settlement_date`, `settlement_trans_date`, `settlement_card_number`, `settlement_deduct`, `settlement_deduct_amount_hex`, `settlement_balance_hex`, `settlement_trans_counter`, `settlement_trans_log`, `settlement_status`, `created_at`, `updated_at`) VALUES
(2,	'04',	'0004350180622001',	'35010375',	'2024-05-06',	'06052024035120',	'7546140001310929',	1,	'00000001',	'000034AC',	'0000000A',	'00C87A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A684B3C6EDE70555C4214F71F6D8F00619A269AD2C8A4B0668EC3F3BF9F7BF172FD7ECEFB1D38C9D41A49F2D4C71261A582FE3621A8DDC2A7421C60B5AA03036832C64245EE83B51BC43BA99D67ABF425947EF7CB785AC1C92143F2EA14FC9A6FB860D103F36F2BB70056B063637F9B48A038B438ED36F46380988B8F58F45D8428D0276BD188B301E9606CE310439BE416D0388B660B294A2BE1AA8CCA3C5A1F8AE7AD4852747ACAFF183BA2C8E20D7000031CF',	'UNSETTLED',	'2024-05-05 22:15:17',	'2024-05-05 22:15:17'),
(3,	'04',	'0004350180622001',	'35010375',	'2024-05-06',	'06052024035500',	'7546140001310929',	1,	'00000001',	'000034AB',	'0000000B',	'00C87A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A6A6355C8F060F11E94BD4703951310B65130DB3664FEF32CEFB681B82035BEE071B97EA7F8C8D2445AD2EFEDEC4DD1D7375E45FA1B19EED73E856CCA861102D09140D884694A6193B6E2B4C202B8F43F1CABE86BF8018334963BE132516E82F4DFBF7609DE9975CAF93EF4DDEAF84FE8C5291047DDFB5E628BB169F79914962270613CD3DE26A90B61078319A2C6FCC5F7B42B2B3DF1B7BC86D5796E3CF0575E90A341FB824500C67B093CFF3AF33779C009BD2',	'UNSETTLED',	'2024-05-05 22:15:21',	'2024-05-05 22:15:21'),
(4,	'04',	'0004350180622001',	'35010375',	'2024-05-06',	'06052024035624',	'7546140001310929',	1,	'00000001',	'000034AA',	'0000000C',	'00C87A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A6AE966B2FBDA365D7317E767B8869A66D81B63151E206C2A6B7F5445F8EBFAAFD03B704920B704C8F86BF0F8E9A3CE53F1046F360AB433EEF6FA5F557FAD3225419E5DBF6962F46FFC1961CF5192FDA453098BFE50E5778ED408E601BED61F2AB85F72EC25A96FFABD673D363103FA529361831016577757F79C3A7E225F8FE5A1776DA44706B490D90BA57D52E552E3F63625C352FD019737FE25B1BA9B8D6CCB2CCA1D7CE459AD22D52B225F7956EC800C83A',	'UNSETTLED',	'2024-05-05 22:15:24',	'2024-05-05 22:15:24'),
(5,	'04',	'0004350180622001',	'35010375',	'2024-05-06',	'06052024040517',	'7546140001310929',	1,	'00000001',	'000034A9',	'0000000D',	'00C87A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A693A654A0B715212A41D696C788FD60D199EA2E294B959E6791D8EDBE5DE4C7DBBB0D6F2CA42A431C8D114A41120B9130221AA58CFD7F325C9A27CCB657972BC58F97A5C1C436DBF78951E2EE996AA6C8EFF6070D90C13FD54E81CAD9212793573EDDD3B12255222B5FED58A2F4A67BF362DBC82C48F4F16B9D83516E9849BB7BE6921FC9A56436C99740BC4D9967546CEE3D3F3D1B13204C891315AB47AD0C5DD50FF10104A05537DB92B2C7856D9C47009B23',	'UNSETTLED',	'2024-05-05 22:15:28',	'2024-05-05 22:15:28'),
(6,	'04',	'0004350180622001',	'35010375',	'2024-05-06',	'06052024040616',	'7546140001310929',	1,	'00000001',	'000034A8',	'0000000E',	'00C87A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A6579DE42D072BBD7B7B7B68213B5301D5DD676EDA11D6C43449128360F06A62B3F376B58B5F9F0E1E4DF7691FCBCABC7ED201E521C93CE07B9A0A5A2CEFE23B0AA803C3B6761896BEECC37A09AA4AFD6415284DE49549DAE6A8A0C976F2E5551545CB85E8FECC73C8CE43A2ACBE9B9C85BEA859A61882E6ABB7B6FE9476879B5C173D2188332C0638A3BADF1450DB44F6760FA6D44C25A46B00D4ACAC982544C1F81A2B5D7B2ECCB5BD2DD3F4A249E1EC000CE6',	'UNSETTLED',	'2024-05-05 22:15:32',	'2024-05-05 22:15:32'),
(7,	'04',	'0004350180622001',	'35010375',	'2024-05-06',	'06052024052414',	'7546140001310929',	1,	'00000001',	'000034A5',	'00000011',	'00C87A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A6E5B9E975BC93E801ADA50D40836F75F61863B90A062704A6C4AE8297EFAEE93B51597F6EBAC57879A648E89A83B1A773CA8165D770543E3B6AF9ED0CF62A9391BDCDD4296E21A2147D08ED441F9C639F8768B6D3E9D09EF834858739E48A66FF4A4AF6E651CB6FC5538F57947C644AC4B1C7BDA9A2A94A8437C86C3B0A7E8678CF5F45EEC816BEC13EEFFE25D31ECE47886DFB520201EE53C118C80C60AD0649D385A0870A5D3335BAEBB0B3E24C89770008C3',	'UNSETTLED',	'2024-05-05 22:24:17',	'2024-05-05 22:24:17'),
(8,	'04',	'0004350180622001',	'35010375',	'2024-05-06',	'06052024052540',	'7546140001310929',	2,	'00000002',	'000034A3',	'00000012',	'00C87A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A6D0F0ECB21EABFF7056DB509370104DE83BD65F6A9EB8D9DA914EDBE6A3FEE1CA3D6E546B343F062E58AE52BDDC1DB31E24E85E5690C1573AF261323A148741011428AC3B8599E1767262D4DE0A713B6589C053345039D2EF7D9CCEF97F32BC164D29156FB680B32248F521DDE64C14CEAF804D96F725AB16AA76AF505E19C2FA44DEEC6B7FA588278391E800AB736775C3DD1B556D20FB7B12DE071FCD4CBB0F795F8620B9043815A8577845B24413B0003232',	'UNSETTLED',	'2024-05-05 22:25:43',	'2024-05-05 22:25:43'),
(9,	'02',	'0004350180622001',	'35010375',	'2024-07-13',	'13072024192003',	'6032982703072841',	2,	'00000002',	'000024BA',	'00000001',	'00787A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A676D69518E2521107AE1FD8FCC22382D305D23DD08DA5E038E11009D71770480256B65FE1649209A33FF2F2C9C695E24DF53FE49F65FFCD071C292D921C2837D4DE377B381E99F227C43A5FC19A682487F59CE63994ABF8B62C9B291276C9880F00CEF7',	'UNSETTLED',	'2024-07-13 12:20:05',	'2024-07-13 12:20:05'),
(10,	'02',	'0004350180622001',	'35010375',	'2024-07-13',	'13072024204433',	'6032982703072841',	2,	'00000002',	'000024B8',	'00000002',	'00787A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A6DC94767E0944BA6F2D73716BD0E9E50851243A9B184B2A04077FE21C93395781FB973E3074395508F704BA088708772E5B8FCD58D10235B450D14376B5B6048FF87AE9FBECF2F0768A51392151917B70054DBDBE6C1A727592869FDAC36BB625003888',	'UNSETTLED',	'2024-07-13 13:44:35',	'2024-07-13 13:44:35'),
(11,	'02',	'0004350180622001',	'35010375',	'2024-07-13',	'13072024221612',	'6032982703072841',	2,	'00000002',	'000024B6',	'00000003',	'00787A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A610D4CC9D91B7E173CC6A61BD32CC67BC89CFEE9C179097F6A96F6504256415AE334D3956617D8838CEAF516FDE9E1403960DC16120048F202CB2B6AE262B577F5BD2279AC1B0878A46321539CC6F3DF45CC44BE1B563B293EEA5DBE3ADB08C1600B78E',	'UNSETTLED',	'2024-07-13 15:16:14',	'2024-07-13 15:16:14'),
(12,	'02',	'0004350180622001',	'35010375',	'2024-10-07',	'07102024121217',	'6032982509987929',	2,	'00000002',	'000003B0',	'00000001',	'00787A95CA061C74932798AC11DC2B6909A3C469D3D2D96132A6CC2BD248E4AE0F64578A0F335E5DDC8F25360224587E37DCBF581FCC4411AD202AFE8CEF4F6A26F385B770546EE1D176F460995E04FE0C605D149E6719C512BD28DBC9207FE4621D12725A47E8314132280F371582A95DDCF6B65326869F1D9A00797E',	'UNSETTLED',	'2024-10-07 05:12:21',	'2024-10-07 05:12:21');

CREATE TABLE `s_appl` (
  `KODE` varchar(20) NOT NULL DEFAULT '',
  `NAMA` varchar(50) NOT NULL DEFAULT '',
  `KETERANGAN` varchar(150) DEFAULT NULL,
  `GROUP_APPL` varchar(20) NOT NULL DEFAULT '',
  `EXECUTABLE` varchar(150) DEFAULT NULL,
  `STATUS` varchar(20) NOT NULL DEFAULT '''OPEN''',
  `MAIN_APPL` varchar(15) DEFAULT NULL,
  PRIMARY KEY (`KODE`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `s_appl` (`KODE`, `NAMA`, `KETERANGAN`, `GROUP_APPL`, `EXECUTABLE`, `STATUS`, `MAIN_APPL`) VALUES
('C0001',	'MEMBER',	'',	'M-MAIN',	'H0001.EXE',	'\'OPEN\'',	'CLINIC'),
('C0007',	'SECURITY',	'',	'M-MAIN',	'H0001.EXE',	'\'OPEN\'',	'CLINIC'),
('C0003',	'MASTER',	'',	'M-MAIN',	'H0001.EXE',	'\'OPEN\'',	'CLINIC'),
('C0004',	'REPORT',	'',	'M-MAIN',	'H0001.EXE',	'\'OPEN\'',	'CLINIC');

CREATE TABLE `s_appl_det` (
  `KODE_APPL` varchar(20) NOT NULL DEFAULT '',
  `NO_URUT` int(11) NOT NULL DEFAULT '0',
  `ROLES` varchar(20) NOT NULL DEFAULT '',
  `KETERANGAN` varchar(150) DEFAULT NULL,
  PRIMARY KEY (`KODE_APPL`,`NO_URUT`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `s_appl_det` (`KODE_APPL`, `NO_URUT`, `ROLES`, `KETERANGAN`) VALUES
('C0002',	7,	'CLOSING',	'CLOSING'),
('C0002',	8,	'RUANGAN',	'RUANGAN'),
('C0004',	4,	'ADJ',	'ADJ'),
('C0005',	4,	'REG',	'REG'),
('C0001',	1,	'ADD',	'ADD'),
('C0001',	2,	'EDIT',	'EDIT'),
('C0001',	3,	'DELETE',	'DELETE'),
('C0001',	4,	'REG',	'REG'),
('C0002',	1,	'ADD',	'ADD'),
('C0002',	2,	'EDIT',	'EDIT'),
('C0002',	3,	'DELETE',	'DELETE'),
('C0002',	4,	'PAYMENT',	'PAYMENT'),
('C0002',	5,	'CANCEL',	'CANCEL'),
('C0002',	6,	'REFUND',	'REFUND'),
('C0003',	1,	'ADD',	'ADD'),
('C0003',	2,	'EDIT',	'EDIT'),
('C0003',	3,	'DELETE',	'DELETE'),
('C0004',	1,	'ADD',	'ADD'),
('C0004',	2,	'EDIT',	'EDIT'),
('C0004',	3,	'DELETE',	'DELETE'),
('C0005',	1,	'ADD',	'ADD'),
('C0005',	2,	'EDIT',	'EDIT'),
('C0005',	3,	'DELETE',	'DELETE'),
('C0006',	1,	'PRINT',	'PRINT'),
('C0007',	1,	'PAYMENT',	'PAYMENT'),
('C0007',	2,	'CANCEL',	'CANCEL'),
('C0007',	3,	'REFUND',	'REFUND'),
('C0008',	1,	'SAVE',	'SAVE'),
('C0008',	2,	'CANCEL',	'CANCEL');

CREATE TABLE `s_user` (
  `ID` varchar(20) NOT NULL DEFAULT '',
  `NAMA` varchar(50) NOT NULL DEFAULT '',
  `KETERANGAN` varchar(150) DEFAULT NULL,
  `PASS` varchar(20) NOT NULL DEFAULT '1234',
  `STATUS` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `s_user` (`ID`, `NAMA`, `KETERANGAN`, `PASS`, `STATUS`) VALUES
('ADMIN',	'ADMIN',	'ADMIN',	'ADMIN',	0),
('Dio',	'Dio Dio',	'Dio',	'dio',	0);

CREATE TABLE `s_user_det` (
  `ID_USER` varchar(20) NOT NULL DEFAULT '',
  `KODE_APPL` varchar(20) NOT NULL DEFAULT '',
  `ROLES` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`ID_USER`,`KODE_APPL`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `s_user_det` (`ID_USER`, `KODE_APPL`, `ROLES`) VALUES
('ADMIN',	'C0007',	'111'),
('KASIR',	'C0002',	'00010110'),
('ADMIN',	'C0006',	'1'),
('ADMIN',	'C0005',	'1111'),
('ADMIN',	'C0004',	'1111'),
('ADMIN',	'C0003',	'111'),
('ADMIN',	'C0002',	'11111111'),
('ADMIN',	'C0001',	'1111'),
('DEVI',	'C0002',	'11100000'),
('DEVI',	'C0001',	'1001'),
('ADMIN',	'C0008',	'11'),
('ANDI',	'C0001',	'1111'),
('ANDI',	'C0002',	'11110000');

CREATE TABLE `tb_datamember` (
  `id_member` int(11) NOT NULL AUTO_INCREMENT,
  `nama` varchar(255) NOT NULL,
  `nomor_kartu` varchar(255) NOT NULL,
  `nomor_plat` varchar(255) DEFAULT NULL,
  `nomor_hp` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `alamat` varchar(255) NOT NULL,
  `produk` varchar(255) NOT NULL,
  `kuota` double DEFAULT NULL,
  `remaining_quota` double DEFAULT '0',
  `start_date` datetime NOT NULL,
  `end_date` datetime NOT NULL,
  `is_expired` int(11) NOT NULL DEFAULT '0',
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id_member`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `tb_datamember` (`id_member`, `nama`, `nomor_kartu`, `nomor_plat`, `nomor_hp`, `email`, `alamat`, `produk`, `kuota`, `remaining_quota`, `start_date`, `end_date`, `is_expired`, `created_at`) VALUES
(64,	'tejoys',	'267677CD',	'213',	'asd',	'AKLSNDF',	'AFD',	'22',	12,	1,	'2025-09-17 00:00:00',	'2025-12-19 18:00:00',	0,	'2025-09-24 11:44:15'),
(65,	'jhons',	'ABCSASD',	'12345',	'12312321',	'TEST',	'ABC',	'3',	10,	0,	'2024-09-17 00:00:00',	'2024-12-19 18:00:00',	0,	'2024-09-24 11:44:15');

DELIMITER ;;

CREATE TRIGGER `tb_datamember_ia` AFTER INSERT ON `tb_datamember` FOR EACH ROW
begin
   insert into tb_datamember_log(id_member, nomor_kartu, start_date, end_date, kuota)
   values  (new.id_member, new.nomor_kartu,  new.start_date,  new.end_date,  new.kuota);
end;;

DELIMITER ;

CREATE TABLE `tb_datamember_log` (
  `id_member` int(11) NOT NULL AUTO_INCREMENT,
  `nomor_kartu` varchar(255) NOT NULL,
  `start_date` datetime NOT NULL,
  `end_date` datetime NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `kuota` decimal(10,0) DEFAULT NULL,
  PRIMARY KEY (`id_member`,`nomor_kartu`,`start_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `tb_datamember_log` (`id_member`, `nomor_kartu`, `start_date`, `end_date`, `created_at`, `kuota`) VALUES
(47,	'266916AD',	'2024-10-01 00:00:00',	'2024-11-01 06:00:00',	'2024-09-23 03:22:52',	30),
(48,	'266916AD',	'2024-10-01 00:00:00',	'2024-11-01 06:00:00',	'2024-09-23 03:42:27',	30),
(49,	'266916AD',	'2024-10-01 00:00:00',	'2024-11-01 06:00:00',	'2024-09-23 03:46:19',	30),
(50,	'266916AD',	'2024-10-01 00:00:00',	'2024-11-01 06:00:00',	'2024-09-23 03:48:43',	30),
(51,	'266916AD',	'2024-10-01 00:00:00',	'2024-11-01 06:00:00',	'2024-09-23 03:49:11',	30),
(52,	'265BF13D',	'2024-09-25 00:00:00',	'2024-10-26 06:00:00',	'2024-09-23 04:01:47',	30),
(53,	'266916AD',	'2024-10-01 00:00:00',	'2024-12-02 12:00:00',	'2024-09-23 04:24:29',	60),
(54,	'266916AD',	'2024-10-01 00:00:00',	'2025-09-26 00:00:00',	'2024-09-23 04:26:42',	360),
(55,	'67677CD\r',	'2024-10-01 00:00:00',	'2025-09-26 00:00:00',	'2024-09-23 07:49:58',	360),
(56,	'265BF13D',	'2024-09-23 00:00:00',	'2024-10-24 06:00:00',	'2024-09-23 08:01:04',	30),
(57,	'267677CD',	'2024-09-17 00:00:00',	'2024-10-18 06:00:00',	'2024-09-23 08:14:25',	30),
(58,	'267677CD',	'2024-10-01 00:00:00',	'2024-11-01 06:00:00',	'2024-09-23 10:51:57',	1800),
(59,	'267677CD',	'2024-10-01 00:00:00',	'2024-09-24 06:00:00',	'2024-09-23 16:30:11',	1),
(60,	'267677CD',	'2024-10-01 00:00:00',	'2024-09-24 06:00:00',	'2024-09-23 16:32:50',	1),
(61,	'267677CD',	'2024-10-01 00:00:00',	'2024-09-24 06:00:00',	'2024-09-23 17:36:04',	1),
(62,	'267677CD',	'2024-10-01 00:00:00',	'2024-09-24 02:00:00',	'2024-09-23 19:12:45',	1),
(63,	'266916AD',	'2024-10-01 00:00:00',	'2024-11-01 06:00:00',	'2024-09-24 06:52:24',	1800),
(64,	'266916AD',	'2024-11-01 00:00:00',	'2024-12-02 06:00:00',	'2024-09-24 06:57:33',	1800),
(64,	'267677CD',	'2024-09-17 00:00:00',	'2024-12-19 18:00:00',	'2024-09-24 11:44:15',	2700),
(65,	'266916A',	'2024-09-17 00:00:00',	'2024-10-18 06:00:00',	'2024-09-24 10:00:49',	1800),
(65,	'267677CD',	'2024-09-17 00:00:00',	'2024-12-19 18:00:00',	'2024-10-08 03:34:25',	10);

CREATE TABLE `tb_port` (
  `KODE` varchar(30) NOT NULL,
  `NAMA` varchar(50) NOT NULL,
  `DESCEIPTION` varchar(150) DEFAULT NULL,
  PRIMARY KEY (`KODE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `tb_port` (`KODE`, `NAMA`, `DESCEIPTION`) VALUES
('COM1',	'COM1',	NULL),
('COM10',	'COM10',	NULL),
('COM11',	'COM11',	NULL),
('COM2',	'COM2',	NULL),
('COM20',	'COM20',	NULL),
('COM3',	'COM3',	NULL),
('COM4',	'COM4',	NULL),
('COM5',	'COM5',	NULL),
('COM6',	'COM6',	NULL),
('COM7',	'COM7',	NULL),
('COM8',	'COM8',	NULL),
('COM9',	'COM9',	NULL);

CREATE TABLE `tb_produk` (
  `id_produk` int(11) NOT NULL AUTO_INCREMENT,
  `nama_produk` varchar(255) NOT NULL,
  `value` int(11) NOT NULL,
  `hours` int(11) NOT NULL,
  `kuota` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id_produk`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `tb_produk` (`id_produk`, `nama_produk`, `value`, `hours`, `kuota`) VALUES
(1,	'1 Bulan 30 Jam',	1,	750,	1800),
(2,	'2 Bulan 60 Jam',	1,	1500,	3600),
(3,	'3 Bulan 90 Jam',	1,	2250,	2700),
(14,	'12 Bulan',	1,	8640,	21600);

CREATE TABLE `tb_setup` (
  `COMPORT` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `tb_setup` (`COMPORT`) VALUES
('COM20');

CREATE TABLE `tb_user` (
  `id_user` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `level` varchar(255) NOT NULL,
  PRIMARY KEY (`id_user`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `tb_user` (`id_user`, `username`, `password`, `level`) VALUES
(1,	'dev',	'dev',	'Developer'),
(2,	'admin',	'admin',	'Staff');

CREATE TABLE `voucher_ms` (
  `id_voucher` int(11) NOT NULL AUTO_INCREMENT,
  `ev_id` varchar(5) NOT NULL,
  `voucher` varchar(5) NOT NULL,
  `usage_status` enum('Terpakai','Belum Terpakai') NOT NULL,
  `usage_date` date NOT NULL,
  PRIMARY KEY (`id_voucher`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `voucher_ms` (`id_voucher`, `ev_id`, `voucher`, `usage_status`, `usage_date`) VALUES
(1,	'BE01',	'65176',	'Terpakai',	'2023-05-05'),
(3,	'BE01',	'66557',	'Terpakai',	'2023-05-05'),
(4,	'BE01',	'08526',	'Terpakai',	'2023-05-05'),
(5,	'BE01',	'72247',	'Terpakai',	'2023-05-05'),
(6,	'BE01',	'58849',	'Terpakai',	'2023-05-05'),
(7,	'BE01',	'11284',	'Terpakai',	'2023-05-05'),
(8,	'BE01',	'24809',	'Terpakai',	'2023-05-05'),
(9,	'EV02',	'74941',	'Terpakai',	'2023-05-05'),
(10,	'EV01',	'17034',	'Terpakai',	'2023-06-13'),
(11,	'EV02',	'17034',	'Terpakai',	'2023-06-13'),
(12,	'1',	'test',	'Terpakai',	'2024-09-27'),
(13,	'1',	'test',	'Terpakai',	'2024-09-27'),
(14,	'1',	'test',	'Terpakai',	'2024-09-27'),
(15,	'1',	'test',	'Terpakai',	'2024-09-27'),
(16,	'1',	'ABC',	'Terpakai',	'2024-09-27');

-- 2024-11-05 09:53:39